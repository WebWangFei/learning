<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    generatorç”Ÿæˆå™¨å¯¹è±¡
  </body>
  <script>
    /* generator
     * 1.å‡½æ•°å‰é¢åŠ ä¸€ä¸ª*ï¼Œ
     * 2.æ˜Ÿå·ä¸å—ä¸¤ä¾§ç©ºæ ¼çš„å½±å“
     * 3.ä¸iteratorç±»ä¼¼ï¼Œä¹Ÿæœ‰next()æ–¹æ³•ï¼Œè¿”å›çš„å€¼ä¸ºå‡½æ•°è¿”å›çš„å€¼
     * 4.ç”Ÿæˆå™¨å‡½æ•°åªä¼šåœ¨åˆå§‹è°ƒç”¨next()æ–¹æ³•åæ‰ä¼šå¼€å§‹æ‰§è¡Œ
     * 5.yieldä¸­æ–­æ‰§è¡Œ
     * 6.åœ¨ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡ä¸Šè°ƒç”¨ next() ä¸ä¼šå½±å“å…¶ä»–ç”Ÿæˆå™¨
     * 7.yield å…³é”®å­—åªèƒ½åœ¨ç”Ÿæˆå™¨å‡½æ•°å†…éƒ¨ä½¿ç”¨
     * 8.ç”Ÿæˆå™¨å¯¹è±¡ä½œä¸ºå¯è¿­ä»£å¯¹è±¡è¿›è¡Œè¿­ä»£ä½¿ç”¨
     * 9.yield å®ç°è¾“å…¥å’Œè¾“å‡º
     * 10.ä½¿ç”¨æ˜Ÿå·å¢å¼º yield çš„è¡Œä¸ºï¼Œè®©å®ƒèƒ½å¤Ÿè¿­ä»£ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œä¸€æ¬¡äº§ç”Ÿä¸€ä¸ªå€¼
     */
    //------1--------
    // ç”Ÿæˆå™¨å‡½æ•°å£°æ˜
    function* generator() {
      console.log("----generatorlog---");
      return "foo";
    }

    // ç”Ÿæˆå™¨å‡½æ•°è¡¨è¾¾å¼
    let generatorFn = function* () {};

    // ä½œä¸ºå¯¹è±¡å­—é¢é‡æ–¹æ³•çš„ç”Ÿæˆå™¨å‡½æ•°
    let foo = {
      *generatorFn() {},
    };

    // ä½œä¸ºç±»å®ä¾‹çš„ç”Ÿæˆå™¨å‡½æ•°
    class Foo {
      *sayName() {}
    }
    // ä½œä¸ºé™æ€æ–¹æ³•çš„ç”Ÿæˆå™¨å‡½æ•°
    class Person {
      static *sayName() {}
    }

    // ------4--------
    generator(); // æ­¤æ—¶ä¸ä¼šæ‰“å°â€˜----generatorlog---â€™å› ä¸ºç¬¬å››ç‚¹
    const generateNext = generator().next();
    // æ‰§è¡Œå‡½æ•°ä¸­çš„é€»è¾‘
    console.log("--ğŸš€-- ~ generateNext", generateNext);
    // {value: "foo", done: true}

    // ------5--------
    function* generatorFn1() {
      yield "foo";
      yield "bar";
      return "baz";
    }
    let generatorObject = generatorFn1();
    let generatorObject1 = generatorFn1();
    // console.log(generatorObject.next()); //{value: "foo", done: false}
    // console.log(generatorObject.next()); //{value: "bar", done: false}
    // console.log(generatorObject.next()); //{value: "baz", done: true}

    // ------6-------
    console.log(generatorObject.next()); //{value: "foo", done: false}
    console.log(generatorObject1.next()); //{value: "foo", done: false}
    // ------7-------
    // æ— æ•ˆ
    function* invalidGeneratorFnB() {
      const b = () => {
        yield;
      };
    }
    // æ— æ•ˆ
    function* invalidGeneratorFnC() {
      (() => {
        yield;
      })();
    }

    // ------8-------
    function* iteratorGenerator() {
      yield 1;
      yield 2;
      yield 3;
    }
    for (const iterator of iteratorGenerator()) {
      console.log("--ğŸš€-- ~ iterator", iterator);
      //   1 2 3
    }
    // ç”Ÿæˆå™¨
    function* nTimes(n) {
      while (n--) {
        yield;
      }
    }
    for (const count of nTimes(3)) {
      console.log("--ğŸš€-- ~ count");
      //æ‰“å°ä¸‰æ¬¡ï¼Œå®Œæˆåœ¨è¿­ä»£é‡Œæ‰§è¡Œçš„ä»»åŠ¡
    }

    //  ------9-------

    function* generatorFn1(initial) {
      console.log("---generatorFn1----");
      console.log(initial);
      console.log(yield);
      console.log(yield);
    }

    let generatorObject11 = generatorFn1("initalValue");
    // ç¬¬ä¸€æ¬¡è°ƒç”¨ next()ä¼ å…¥çš„å€¼ä¸ä¼šè¢«ä½¿ç”¨ï¼Œå› ä¸ºè¿™ä¸€æ¬¡è°ƒç”¨æ˜¯ä¸ºäº†å¼€å§‹æ‰§è¡Œç”Ÿæˆå™¨å‡½æ•°:
    generatorObject11.next("asd"); // initalValue
    generatorObject.next("baz"); //  baz
    generatorObject.next("qux"); // qux

    // yield å…³é”®å­—å¯ä»¥åŒæ—¶ç”¨äºè¾“å…¥å’Œè¾“å‡ºï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤º
    function* generatorBoth() {
      console.log("---generatorBoth---");
      //   é‡åˆ° yield å…³é”®å­—æ—¶æš‚åœæ‰§è¡Œå¹¶ è®¡ç®—å‡ºè¦äº§ç”Ÿçš„å€¼:foo
      return yield "foo";
    }
    const res1 = generatorBoth();
    console.log("--ğŸš€-- ~ res1", res1.next()); //foo

    // æ¥å—nextä¼ é€’çš„å€¼å¹¶è¿”å›
    console.log("--ğŸš€-- ~ res1", res1.next("bar")); //bar

    // ------10-------
    function* generatorFn() {
      // ä¸generatorå‡½æ•°ä¸€è¡Œï¼Œæ˜Ÿå·ä½ç½®ä¸å½±å“æ‰§è¡Œç»“æœ
      //   yield *[1, 2, 3];
      yield* [1, 2, 3];
    }
    let generatorObject = generatorFn();
    for (const x of generatorFn()) {
      console.log(x); //1 2 3
    }
  </script>
</html>
